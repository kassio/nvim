#!/usr/bin/env bash

which for-each-ruby > /dev/null || { echo >&2 "for-each-ruby not found!" && exit -1; }

header() { echo -e "ðŸ”¹  $@"; }
item() { echo -e "\tâ˜€ï¸  $@"; }

header "lua dependency"
brew install lua > /dev/null

header "python dependencies"
pip3 install --upgrade --force-reinstall vim-vint > /dev/null
pip3 install --upgrade --force-reinstall neovim > /dev/null
pip3 install --upgrade --force-reinstall neovim-remote > /dev/null

header "ruby dependencies"
for-each-ruby gem install neovim > /dev/null
for-each-ruby gem install rcodetools > /dev/null

header "linters"
item "rubocop" && \
  for-each-ruby gem install rubocop > /dev/null
item "scss_lint" && \
  for-each-ruby gem install scss_lint > /dev/null
item "eslint" && \
  npm install --global eslint > /dev/null
item "eslint-react" && \
  npm install --global eslint-plugin-react > /dev/null
item "babel-eslint" && \
  npm install --global babel-eslint > /dev/null

header "language servers"
item "solargraph (ruby)" && \
  gem install solargraph

header "formatters"
item "prettier" && \
  npm install --global prettier > /dev/null
item "prettier-eslint" && \
  npm install --global prettier-eslint prettier-eslint-cli > /dev/null

header "updating vim packs"
bash $(dirname ${0})/pack > /dev/null
