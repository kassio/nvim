#!/usr/bin/env bash

plug="$HOME/.local/share/nvim/site/autoload/plug.vim"
plugin="$HOME/.config/nvim/plugin.vim"

__pack() {
  case "$1" in
    -u | --update)
      nvim +"Upgrade | qall!"
      ;;
    *)
      nvim --noplugin -u "$plugin" \
        +"PlugUpgrade | PlugInstall! | CocUpdateSync" \
        +"qall!"
      ;;
  esac
}

if [ ! -f "${plug}" ]; then
  curl -sfLo "${plug}" --create-dirs \
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
fi

__pack "$@"
