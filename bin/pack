#!/usr/bin/env bash

__pack() {
  local cmd
  case "$1" in
    -u | --update)
      cmd="PlugUpdate!"
      ;;
    *)
      cmd="PlugInstall!"
      ;;
  esac

  nvim --noplugin +"silent PlugUpgrade" +"silent ${cmd}" +"qall!"
}

plug="${HOME}/.local/share/nvim/site/autoload/plug.vim"

if [ ! -f "${plug}" ]; then
  curl -sfLo "${plug}" --create-dirs \
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
fi

__pack "$@"
